import{TransactionVersion as s,ChainID as n,fetchPrivate as o}from"micro-stacks/common";export{ChainID,TransactionVersion}from"micro-stacks/common";const l="https://stacks-node-api.mainnet.stacks.co",h="https://stacks-node-api.testnet.stacks.co",d="http://localhost:3999";class a{constructor(e={url:l}){if(this.version=s.Mainnet,this.chainId=n.Mainnet,this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.getCoreApiUrl=()=>this._coreApiUrl,this.isMainnet=()=>this.version===s.Mainnet,this.getBroadcastApiUrl=()=>`${this.getCoreApiUrl()}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.getCoreApiUrl()}${this.transferFeeEstimateEndpoint}`,this.getAccountApiUrl=r=>`${this.getCoreApiUrl()}${this.accountEndpoint}/${r}?proof=0`,this.getAbiApiUrl=(r,t)=>`${this.getCoreApiUrl()}${this.contractAbiEndpoint}/${r}/${t}`,this.getReadOnlyFunctionCallApiUrl=(r,t,i)=>`${this.getCoreApiUrl()}${this.readOnlyFunctionCallEndpoint}/${r}/${t}/${encodeURIComponent(i)}`,this.getInfoUrl=()=>`${this.getCoreApiUrl()}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.getCoreApiUrl()}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.getCoreApiUrl()}/v2/pox`,this.getRewardsUrl=(r,t)=>{let i=`${this.getCoreApiUrl()}/extended/v1/burnchain/rewards/${r}`;return t&&(i=`${i}?limit=${t.limit}&offset=${t.offset}`),i},this.getRewardsTotalUrl=r=>`${this.getCoreApiUrl()}/extended/v1/burnchain/rewards/${r}/total`,this.getRewardHoldersUrl=(r,t)=>{let i=`${this.getCoreApiUrl()}/extended/v1/burnchain/reward_slot_holders/${r}`;return t&&(i=`${i}?limit=${t.limit}&offset=${t.offset}`),i},this.getStackerInfoUrl=(r,t)=>`${this.getCoreApiUrl()}${this.readOnlyFunctionCallEndpoint}
    ${r}/${t}/get-stacker-info`,!e.url&&!e.coreApiUrl)throw Error("[miro-stacks] Network initialized with no api url");this._coreApiUrl=e.url||e.coreApiUrl,this.bnsLookupUrl=e.bnsLookupUrl||e.url||e.coreApiUrl,this.fetcher=e.fetcher||o}get coreApiUrl(){return this._coreApiUrl}set coreApiUrl(e){throw new Error("Cannot modify property `coreApiUrl` after object initialization")}getNameInfo(e){const r=`${this.bnsLookupUrl}/v1/names/${e}`;return this.fetcher(r).then(t=>{if(t.status===404)throw new Error("Name not found");if(t.status!==200)throw new Error(`Bad response status: ${t.status}`);return t.json()}).then(t=>t.address?Object.assign({},t,{address:t.address}):t)}}class p extends a{constructor(e={url:h,fetcher:o}){super(e);this.version=s.Testnet,this.chainId=n.Testnet}}class u extends a{constructor(e={url:d,fetcher:o}){super(e);this.version=s.Testnet,this.chainId=n.Testnet}}export{l as HIRO_MAINNET_DEFAULT,d as HIRO_MOCKNET_DEFAULT,h as HIRO_TESTNET_DEFAULT,a as StacksMainnet,u as StacksMocknet,p as StacksTestnet};
